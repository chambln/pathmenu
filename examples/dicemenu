#!/bin/sh -euf
# dicemenu
# Copyright (c) 2019 Gregory L. Chamberlain
# Available under the MIT License -- see LICENSE file.

IFS='
'

dice() {
    case $# in
        0) return 1 ;;
        1) p=${1##*/} ;;
        2) p="${##*/}, ${2##*/}" ;;
        3) p="${##*/}, ${2##*/}, ${3##*/}" ;;
        *) for last do :; done
           p="${1##*/}, ${2##*/}, â€¦, ${last##*/}"
    esac
    cmd=$(dmenu_path | dmenu -p "$p") &&
        eval "$cmd"
}

# Word splitting is safe and intended here.
# shellcheck disable=2046
while dice $(pathmenu "$@"); do :; done
